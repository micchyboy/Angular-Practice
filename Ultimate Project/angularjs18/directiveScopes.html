<!DOCTYPE html>
<html ng-app="exampleApp">
<head>
<title>Directive Scopes</title>
<script src="angular.js"></script>
<link href="bootstrap.css" rel="stylesheet" />
<link href="bootstrap-theme.css" rel="stylesheet" />
<script type="text/ng-template" id="scopeTemplate">
<div class="panel-body">
<p>Name: <input ng-model="data.name" /></p>
<p>City: <input ng-model="city" /></p>
<p>Country: <input ng-model="country" /></p>
</div>
</script>
<script type="text/javascript">
	angular.module("exampleApp", []).directive(
			"scopeDemo",
			function() {
				return {
					require : "^productTable",
					template : function() {
						return angular.element(
								document.querySelector("#scopeTemplate"))
								.html();
					},
					link : function(scope, element, attrs, ctrl) {
						console.log("Scope Demo Scope: ");
						console.log(scope);
					}
				}
			}).directive("productTable", function() {
		return {
			scope : {},
			controller : function($scope, $element, $attrs) {
				console.log("Product Table Scope: ");
				console.log($scope);
				this.updateTotal = function() {
					var total = 0;
					for (var i = 0; i < $scope.data.length; i++) {
						total += Number($scope.data[i].quantity);
					}
					$scope.value = total;
				}
			}
		}
	}).controller("scopeCtrl", function($scope) {
		$scope.data = {
			name : "Adam"
		};
		
		/* $scope.products = [ {
			name : "Apples",
			price : 1.20,
			quantity : 2
		}, {
			name : "Bananas",
			price : 2.42,
			quantity : 3
		}, {
			name : "Pears",
			price : 2.02,
			quantity : 1
		} ]; */
		
		$scope.city = "London";
		
		console.log("Controller Scope: ");
		console.log($scope);
	});
</script>
</head>
<body ng-controller="scopeCtrl">
	<div class="panel panel-default">
		<div class="panel-body" product-table>
			<!-- <div ng-repeat="item in products" class="panel-body" scope-demo></div> -->
			<div class="panel-body" scope-demo></div>
			<div class="panel-body" scope-demo></div>
			<div class="panel-body" scope-demo></div>
		</div>
		<!-- 		<div class="panel-body" scope-demo></div> -->
	</div>
</body>
</html>